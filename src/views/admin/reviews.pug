extends ../../base

block head
  title Admin Reviews | Natours
  link(rel='stylesheet' href='/css/admin.css')

block content
  .admin-container
    // Admin Sidebar
    include _adminSidebar

    // Main Content Area
    main.admin-main
      // Top Header
      header.admin-header
        .admin-header__left
          h1.admin-header__title Reviews Management
          p.admin-header__subtitle Manage all tour reviews and ratings
        .admin-header__right
          .admin-header__actions
            a.btn.btn--green.btn--small(href='/admin/reviews/new') 
              svg.btn__icon
                use(xlink:href='/img/icons.svg#icon-plus')
              span Add New Review
            a.btn.btn--white.btn--small(href='/') View Site

      // Reviews Content
      .admin-content
        // Search and Filters
        .admin-filters
          .admin-search
            input.admin-search__input#reviewSearch(type='text' placeholder='Search reviews...')
            svg.admin-search__icon
              use(xlink:href='/img/icons.svg#icon-search')
          
          .admin-filters__controls
            select.admin-filter#ratingFilter
              option(value='') All Ratings
              option(value='5') 5 Stars
              option(value='4') 4 Stars
              option(value='3') 3 Stars
              option(value='2') 2 Stars
              option(value='1') 1 Star
            
            select.admin-filter#tourFilter
              option(value='') All Tours
              // Tour options will be populated by JavaScript

        // Reviews Table
        .admin-table-container
          table.admin-table
            thead.admin-table__head
              tr
                th.admin-table__header
                  input.admin-table__checkbox#selectAllReviews(type='checkbox')
                th.admin-table__header Review ID
                th.admin-table__header Tour
                th.admin-table__header User
                th.admin-table__header Rating
                th.admin-table__header Review
                th.admin-table__header Date
                th.admin-table__header Actions
            tbody.admin-table__body#reviewsTableBody
              // Reviews will be populated by JavaScript

        // Pagination
        .admin-pagination#reviewsPagination
          // Pagination will be populated by JavaScript

    // Review Modal
    .admin-modal#reviewModal
      .admin-modal__overlay
      .admin-modal__content
        .admin-modal__header
          h3.admin-modal__title#reviewModalTitle Add New Review
          button.admin-modal__close#closeReviewModal
            svg.admin-modal__close-icon
              use(xlink:href='/img/icons.svg#icon-x')
        
        .admin-modal__body
          form.admin-form#reviewForm
            .admin-form__row
              .admin-form__group
                label.admin-form__label(for='reviewTour') Tour
                select.admin-form__select#reviewTour(name='tour' required)
                  option(value='') Select Tour
                  // Tour options will be populated by JavaScript
              
              .admin-form__group
                label.admin-form__label(for='reviewUser') User
                select.admin-form__select#reviewUser(name='user' required)
                  option(value='') Select User
                  // User options will be populated by JavaScript
            
            .admin-form__row
              .admin-form__group
                label.admin-form__label(for='reviewRating') Rating
                select.admin-form__select#reviewRating(name='rating' required)
                  option(value='') Select Rating
                  option(value='5') 5 Stars
                  option(value='4') 4 Stars
                  option(value='3') 3 Stars
                  option(value='2') 2 Stars
                  option(value='1') 1 Star
              
              .admin-form__group
                label.admin-form__label(for='reviewDate') Review Date
                input.admin-form__input#reviewDate(type='date' name='date' required)
            
            .admin-form__group
              label.admin-form__label(for='reviewText') Review Text
              textarea.admin-form__textarea#reviewText(name='review' rows='4' placeholder='Enter review text...' required)
            
            .admin-form__actions
              button.btn.btn--white.btn--small(type='button' id='cancelReview') Cancel
              button.btn.btn--green.btn--small(type='submit' id='saveReview') Save Review

    // Delete Confirmation Modal
    .admin-modal#deleteReviewModal
      .admin-modal__overlay
      .admin-modal__content.admin-modal__content--small
        .admin-modal__header
          h3.admin-modal__title Confirm Delete
          button.admin-modal__close#closeDeleteReviewModal
            svg.admin-modal__close-icon
              use(xlink:href='/img/icons.svg#icon-x')
        
        .admin-modal__body
          p.admin-modal__message Are you sure you want to delete this review? This action cannot be undone.
          
          .admin-modal__actions
            button.btn.btn--white.btn--small#cancelDeleteReview Cancel
            button.btn.btn--red.btn--small#confirmDeleteReview Delete Review

    // Loading Overlay
    .admin-loading#adminLoading
      .admin-loading__spinner
        svg.admin-loading__spinner-icon
          use(xlink:href='/img/icons.svg#icon-loader')

block scripts
  script(src='/js/admin-reviews.js')
