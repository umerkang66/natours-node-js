extends ../../base

block head
  title Admin Bookings | Natours
  link(rel='stylesheet' href='/css/admin.css')

block content
  .admin-container
    // Admin Sidebar
    include _adminSidebar

    // Main Content Area
    main.admin-main
      // Top Header
      header.admin-header
        .admin-header__left
          h1.admin-header__title Bookings Management
          p.admin-header__subtitle Manage all tour bookings and payments
        .admin-header__right
          .admin-header__actions
            a.btn.btn--green.btn--small(href='/admin/bookings/new') 
              svg.btn__icon
                use(xlink:href='/img/icons.svg#icon-plus')
              span Add New Booking
            a.btn.btn--white.btn--small(href='/') View Site

      // Bookings Content
      .admin-content
        // Search and Filters
        .admin-filters
          .admin-search
            input.admin-search__input#bookingSearch(type='text' placeholder='Search bookings...')
            svg.admin-search__icon
              use(xlink:href='/img/icons.svg#icon-search')
          
          .admin-filters__controls
            select.admin-filter#statusFilter
              option(value='') All Status
              option(value='confirmed') Confirmed
              option(value='pending') Pending
              option(value='cancelled') Cancelled
            
            select.admin-filter#tourFilter
              option(value='') All Tours
              // Tour options will be populated by JavaScript

        // Bookings Table
        .admin-table-container
          table.admin-table
            thead.admin-table__head
              tr
                th.admin-table__header
                  input.admin-table__checkbox#selectAllBookings(type='checkbox')
                th.admin-table__header Booking ID
                th.admin-table__header Tour
                th.admin-table__header User
                th.admin-table__header Price
                th.admin-table__header Status
                th.admin-table__header Date
                th.admin-table__header Actions
            tbody.admin-table__body#bookingsTableBody
              // Bookings will be populated by JavaScript

        // Pagination
        .admin-pagination#bookingsPagination
          // Pagination will be populated by JavaScript

    // Booking Modal
    .admin-modal#bookingModal
      .admin-modal__overlay
      .admin-modal__content
        .admin-modal__header
          h3.admin-modal__title#bookingModalTitle Add New Booking
          button.admin-modal__close#closeBookingModal
            svg
              use(xlink:href='/img/icons.svg#icon-x')
        
        .admin-modal__body
          form.admin-form#bookingForm
            .admin-form__row
              .admin-form__group
                label.admin-form__label(for='bookingTour') Tour
                select.admin-form__select#bookingTour(name='tour' required)
                  option(value='') Select Tour
                  // Tour options will be populated by JavaScript
              
              .admin-form__group
                label.admin-form__label(for='bookingUser') User
                select.admin-form__select#bookingUser(name='user' required)
                  option(value='') Select User
                  // User options will be populated by JavaScript
            
            .admin-form__row
              .admin-form__group
                label.admin-form__label(for='bookingPrice') Price ($)
                input.admin-form__input#bookingPrice(type='number' name='price' min='0' step='0.01' required)
              
              .admin-form__group
                label.admin-form__label(for='bookingStatus') Status
                select.admin-form__select#bookingStatus(name='status' required)
                  option(value='confirmed') Confirmed
                  option(value='pending') Pending
                  option(value='cancelled') Cancelled
            
            .admin-form__group
              label.admin-form__label(for='bookingDate') Booking Date
              input.admin-form__input#bookingDate(type='date' name='date' required)
            
            .admin-form__actions
              button.btn.btn--white.btn--small(type='button' id='cancelBooking') Cancel
              button.btn.btn--green.btn--small(type='submit' id='saveBooking') Save Booking

    // Delete Confirmation Modal
    .admin-modal#deleteBookingModal
      .admin-modal__overlay
      .admin-modal__content.admin-modal__content--small
        .admin-modal__header
          h3.admin-modal__title Confirm Delete
          button.admin-modal__close#closeDeleteBookingModal
            svg
              use(xlink:href='/img/icons.svg#icon-x')
        
        .admin-modal__body
          p.admin-modal__message Are you sure you want to delete this booking? This action cannot be undone.
          
          .admin-modal__actions
            button.btn.btn--white.btn--small#cancelDeleteBooking Cancel
            button.btn.btn--red.btn--small#confirmDeleteBooking Delete Booking

    // Loading Overlay
    .admin-loading#adminLoading
      .admin-loading__spinner
        svg
          use(xlink:href='/img/icons.svg#icon-loader')

block scripts
  script(src='/js/admin-bookings.js')
